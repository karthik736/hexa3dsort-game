System.register("chunks:///_virtual/BackgroundQuadEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o,c,i,a,u,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){c=e.cclegacy,i=e._decorator,a=e.Node,u=e.tween,l=e.Component}],execute:function(){var s,f,p,d,g;c._RF.push({},"70e8fp2yDFN8rcrhbJeWQob","BackgroundQuadEffect",void 0);var y=i.ccclass,b=i.property;e("BackgroundQuadEffect",(s=y("BackgroundQuadEffect"),f=b(a),s((g=r((d=function(e){function r(){for(var r,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return r=e.call.apply(e,[this].concat(c))||this,n(r,"bgNode",g,o(r)),r}return t(r,e),r.prototype.start=function(){u(this.bgNode).to(60,{eulerAngles:{z:360}}).union().repeatForever().start()},r}(l)).prototype,"bgNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/DragRotateController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,r,i,a,s,l,u,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.Node,l=t.input,u=t.Input,c=t.Vec3,h=t.Component}],execute:function(){var g,p,f,y,T,R;i._RF.push({},"d783aFyImJPhquw6Z3TOM9g","DragRotateController",void 0);var v=a.ccclass,d=a.property;t("DragRotateController",(g=v("DragRotateController"),p=d(s),g((T=e((y=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,n(e,"outerRing",T,r(e)),n(e,"rotationSpeed",R,r(e)),e.lastAngle=0,e}o(e,t);var i=e.prototype;return i.onLoad=function(){l.on(u.EventType.TOUCH_START,this.onTouchStart,this),l.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this)},i.onDestroy=function(){l.off(u.EventType.TOUCH_START,this.onTouchStart,this),l.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this)},i.onTouchStart=function(t){if(this.outerRing){var e=t.getLocation(),o=this.outerRing.worldPosition;this.lastAngle=180*Math.atan2(e.y-o.y,e.x-o.x)/Math.PI}else console.warn("âš ï¸ OuterRing not assigned!")},i.onTouchMove=function(t){if(this.outerRing){var e=t.getLocation(),o=this.outerRing.worldPosition,n=180*Math.atan2(e.y-o.y,e.x-o.x)/Math.PI,r=n-this.lastAngle;r>180&&(r-=360),r<-180&&(r+=360),r*=this.rotationSpeed,this.lastAngle=n;var i=this.outerRing.eulerAngles;this.outerRing.eulerAngles=new c(i.x,i.y+r,i.z)}else console.warn("âš ï¸ OuterRing not assigned!")},e}(h)).prototype,"outerRing",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(y.prototype,"rotationSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=y))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,l,u,s,c,h,g,f,p,d,v,m,y,b,C,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.createForOfIteratorHelperLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,u=e.Node,s=e.Material,c=e.CCInteger,h=e.Camera,g=e.Vec3,f=e.instantiate,p=e.MeshRenderer,d=e.input,v=e.Input,m=e.PhysicsSystem,y=e.PhysicsGroup,b=e.tween,C=e.Color,T=e.Component}],execute:function(){var w,M,R,P,G,S,E,_,z,A,D,H,N,x,O,B,L,W,F,U,k,I,X,V,j;a._RF.push({},"6673aZAmoFEJ5EWj2xhlDSO","GameManager",void 0);var J=l.ccclass,Z=l.property;function q(e,t){for(var n=e.slice(),r=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}(t),i=n.length-1;i>0;i--){var o=Math.floor(r()*(i+1)),a=[n[o],n[i]];n[i]=a[0],n[o]=a[1]}return n}e("GameManager",(w=J("GameManager"),M=Z(u),R=Z([s]),P=Z({type:[c]}),G=Z(u),S=Z(u),E=Z(u),_=Z(h),z=Z(u),A=Z(u),w((N=t((H=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"tilePrefab",N,o(t)),i(t,"tileMaterials",x,o(t)),i(t,"ringCounts",O,o(t)),i(t,"baseRadius",B,o(t)),i(t,"ringSpacing",L,o(t)),i(t,"tileHeight",W,o(t)),i(t,"rotationSpeed",F,o(t)),i(t,"outerRing",U,o(t)),i(t,"middleRing",k,o(t)),i(t,"innerRing",I,o(t)),i(t,"sceneCamera",X,o(t)),i(t,"clearEffectPrefab",V,o(t)),i(t,"backgroundPanel",j,o(t)),t.isDragging=!1,t.dragStartX=0,t.selectedGroup=null,t}n(t,e);var a=t.prototype;return a.start=function(){this.generateTower()},a.generateTower=function(){for(var e=this.tileMaterials.length,t=[this.outerRing,this.middleRing,this.innerRing],n=42,i=0;i<this.ringCounts.length;i++)for(var o=this.ringCounts[i],a=this.baseRadius-i*this.ringSpacing,l=t[i],s=0;s<o;s++){var c=new u("ring"+i+"_col"+s);c.setParent(l);var h=2*Math.PI/o*s,d=a*Math.cos(h),v=a*Math.sin(h);c.setPosition(new g(d,0,v));for(var m,y=q(Array.from({length:e},(function(e,t){return t})),n++),b=0,C=r(y);!(m=C()).done;)for(var T=m.value,w=0;w<6;w++){var M=f(this.tilePrefab);M.setParent(c),M.setPosition(new g(0,b*this.tileHeight,0)),b++;var R=M.getChildByName("hexa_02");if(R){var P=R.getComponent(p);P&&this.tileMaterials[T]&&P.setMaterial(this.tileMaterials[T],0)}}}},a.onLoad=function(){d.on(v.EventType.TOUCH_START,this.onTouchStart,this),d.on(v.EventType.TOUCH_MOVE,this.onTouchMove,this),d.on(v.EventType.TOUCH_END,this.onTouchEnd,this)},a.onDestroy=function(){d.off(v.EventType.TOUCH_START,this.onTouchStart,this),d.off(v.EventType.TOUCH_MOVE,this.onTouchMove,this),d.off(v.EventType.TOUCH_END,this.onTouchEnd,this)},a.onTouchStart=function(e){if(this.sceneCamera){this.isDragging=!0,this.dragStartX=e.getLocationX();var t=this.sceneCamera.screenPointToRay(e.getLocation()),n=[];m.instance.raycast(t,y.DEFAULT,Number.MAX_VALUE),m.instance.raycastResults.forEach((function(e){return n.push(e)}));for(var r=0,i=n;r<i.length;r++){var o,a=null==(o=i[r].collider)||null==(o=o.node)?void 0:o.parent,l=null==a?void 0:a.parent;if(a&&l&&(l===this.outerRing||l===this.middleRing||l===this.innerRing)){var u=this.getSameColorRowGroup(l,a.name);if(u){this.selectedGroup=u,this.applyGlow(this.selectedGroup);break}}}}else console.warn("âš ï¸ Scene Camera not assigned!")},a.onTouchMove=function(e){if(this.isDragging&&this.selectedGroup){var t=e.getLocationX()-this.dragStartX;Math.abs(t)>50&&(this.spinGroup(this.selectedGroup,t>0?1:-1),this.isDragging=!1,this.selectedGroup=null)}},a.onTouchEnd=function(){this.isDragging=!1,this.selectedGroup=null},a.getSameColorRowGroup=function(e,t){var n,r=e.children,i=r.length,o=r.findIndex((function(e){return e.name===t}));if(-1===o)return null;var a=[],l=this.getTopTile(r[o]),u=null==l||null==(n=l.getChildByName("hexa_02"))||null==(n=n.getComponent(p))?void 0:n.getMaterial(0);a.push(r[o]);for(var s=1;s<6;s++){var c,h=r[(o+s)%i],g=this.getTopTile(h);if((null==g||null==(c=g.getChildByName("hexa_02"))||null==(c=c.getComponent(p))?void 0:c.getMaterial(0))!==u)return null;a.push(h)}return a},a.getTopTile=function(e){return e.children.reduce((function(e,t){return e.position.y>t.position.y?e:t}))},a.spinGroup=function(e,t){var n=this;void 0===t&&(t=1);var i=e[0].parent;if(i!==this.outerRing){var o=new u("SpinGroup");o.setParent(i),o.setWorldPosition(i.getWorldPosition()),o.setWorldRotation(i.getWorldRotation());for(var a,l=r(e);!(a=l()).done;){a.value.setParent(o)}b(o).to(1/this.rotationSpeed,{eulerAngles:new g(0,60*t,0)}).call((function(){for(var t,a=r(e);!(t=a()).done;){t.value.setParent(i)}o.destroy(),n.removeGlow(e),n.checkAllColumnsForMatches()})).start()}else{for(var s,c=e[0],h=this.getTopTile(c).worldPosition.y,f=.63*6,p=Math.floor(h/f),d=[],v=r(this.outerRing.children);!(s=v()).done;)for(var m,y=s.value,C=r(y.children);!(m=C()).done;){var T=m.value,w=T.worldPosition.y;Math.floor(w/f)===p&&d.push(T)}if(0===d.length)return;var M=new u("ColorBandSpinGroup");M.setParent(this.node),M.setWorldPosition(new g(0,p*f+f/2,0)),M.setWorldRotation(new g(0,0,0));for(var R=0,P=d;R<P.length;R++){P[R].setParent(M)}b(M).by(1/this.rotationSpeed,{eulerAngles:new g(0,360*t,0)}).call((function(){for(var t=0,r=d;t<r.length;t++){var i=r[t];i.setParent(i.parent.parent)}M.destroy(),n.removeGlow(e),n.checkAllColumnsForMatches()})).start()}},a.applyGlow=function(e){for(var t,n=r(e);!(t=n()).done;){var i=t.value,o=this.getTopTile(i).getChildByName("hexa_02"),a=null==o?void 0:o.getComponent(p);if(a){var l=a.getMaterial(0);l&&l.setProperty("albedoColor",new C(255,255,150,255))}}},a.removeGlow=function(e){for(var t,n=r(e);!(t=n()).done;){var i=t.value,o=this.getTopTile(i).getChildByName("hexa_02"),a=null==o?void 0:o.getComponent(p);if(a){var l=a.getMaterial(0);l&&l.setProperty("albedoColor",new C(255,255,255,255))}}},a.isColumnMatched=function(e){var t;if(48!==e.children.length)return!1;var n=e.children.slice().sort((function(e,t){return e.position.y-t.position.y})),r=n[0].getChildByName("hexa_02"),i=null==r||null==(t=r.getComponent(p))?void 0:t.getMaterial(0);return n.every((function(e){var t,n=e.getChildByName("hexa_02");return(null==n||null==(t=n.getComponent(p))?void 0:t.getMaterial(0))===i}))},a.clearColumnWithAnimation=function(e){for(var t,n=function(){var e=t.value;b(e).to(.4,{scale:new g(0,0,0)}).call((function(){return e.destroy()})).start()},i=r(e.children);!(t=i()).done;)n()},a.checkAllColumnsForMatches=function(){for(var e=0,t=[this.outerRing,this.middleRing,this.innerRing];e<t.length;e++)for(var n,i=r(t[e].children);!(n=i()).done;){var o=n.value;this.isColumnMatched(o)&&this.clearColumnWithAnimation(o)}},t}(T)).prototype,"tilePrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(H.prototype,"tileMaterials",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(H.prototype,"ringCounts",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[18,12,6]}}),B=t(H.prototype,"baseRadius",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5.7}}),L=t(H.prototype,"ringSpacing",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),W=t(H.prototype,"tileHeight",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.63}}),F=t(H.prototype,"rotationSpeed",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),U=t(H.prototype,"outerRing",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(H.prototype,"middleRing",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(H.prototype,"innerRing",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"sceneCamera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(H.prototype,"clearEffectPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(H.prototype,"backgroundPanel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=H))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/HorizontalRunManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i,r,o,a,l,c,s,u,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,l=n.Node,c=n.Sprite,s=n.tween,u=n.Vec3,p=n.Component}],execute:function(){var g,h,f,d,y,R,m;o._RF.push({},"3816atVtaNPUq9smiOmYDyb","HorizontalRunManager",void 0);var v=a.ccclass,M=a.property;n("HorizontalRunManager",(g=v("HorizontalRunManager"),h=M(l),f=M({tooltip:"How far to slide off (world units)"}),g((R=t((y=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,i(t,"ring",R,r(t)),i(t,"slideDistance",m,r(t)),t}e(t,n);var o=t.prototype;return o.onLoad=function(){this.ring.on("rotated",this._onRotated,this)},o._onRotated=function(){for(var n=this.ring.children.map((function(n){return n.getComponent(c)})).map((function(n){return n.color})),t=0,e=1,i=0,r=1;r<=n.length;r++)if(!n[r%n.length].equals(n[i])){var o=r-i;o>e&&(e=o,t=i),i=r}e>=2?this._slideRun(t,e):this.ring.getComponent("RotateRingController").unlock()},o._slideRun=function(n,t){for(var e=this,i=this.ring.children.length,r=function(){var t=(n+o)%i,r=e.ring.children[t],a=r.position.clone(),l=2*Math.PI/i*t+Math.PI/2,c=new u(Math.cos(l),0,Math.sin(l));s(r).to(.5,{position:a.add(c.multiplyScalar(e.slideDistance))}).call((function(){return r.destroy()})).start()},o=0;o<t;o++)r();s(this).delay(.55).call((function(){e.ring.children.splice(n,t),e.ring.getComponent("RotateRingController").unlock()})).start()},t}(p)).prototype,"ring",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(y.prototype,"slideDistance",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),d=y))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BackgroundQuadEffect.ts","./DragRotateController.ts","./GameManager.ts","./HorizontalRunManager.ts","./OuterRowSpinner.ts","./RingLayout.ts","./RotateRingController.ts","./RowGroupSpinner.ts","./TowerAudioController.ts.ts","./TowerGenerator.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/OuterRowSpinner.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,s,a,c,l,u,h,p,g,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.Node,l=e.Camera,u=e.input,h=e.Input,p=e.PhysicsSystem,g=e.Vec3,T=e.Component}],execute:function(){var f,d,v,y,R,w,S,E;s._RF.push({},"502e36v/ddHvpgNTCiUsqFC","OuterRowSpinner",void 0);var O=a.ccclass,b=a.property;e("OuterRowSpinner",(f=O("OuterRowSpinner"),d=b(c),v=b(l),f((w=t((R=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,o(t,"outerRing",w,r(t)),o(t,"spinSpeed",S,r(t)),o(t,"camera",E,r(t)),t.selectedRowTiles=[],t.isDragging=!1,t.startX=0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){u.on(h.EventType.TOUCH_START,this.onTouchStart,this),u.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(h.EventType.TOUCH_END,this.onTouchEnd,this)},s.onDestroy=function(){u.off(h.EventType.TOUCH_START,this.onTouchStart,this),u.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(h.EventType.TOUCH_END,this.onTouchEnd,this)},s.onTouchStart=function(e){var t,n=null==(t=this.getComponent(l))?void 0:t.screenPointToRay(e.getLocation());if(n){var o=p.instance.raycastResults;if(p.instance.raycast(n))for(var r,s=i(o);!(r=s()).done;){var a=r.value.collider.node;if(a.parent&&a.parent.parent===this.outerRing){var c=a.getSiblingIndex();this.selectedRowTiles=this.getRowTiles(c),console.log("Selected row "+c+" with "+this.selectedRowTiles.length+" tiles");break}}this.startX=e.getLocationX(),this.isDragging=!0}},s.onTouchMove=function(e){if(this.isDragging&&0!==this.selectedRowTiles.length){for(var t,n=.3*(e.getLocationX()-this.startX),o=i(this.selectedRowTiles);!(t=o()).done;){var r=t.value,s=r.eulerAngles;r.eulerAngles=new g(0,s.y+n,0)}this.startX=e.getLocationX()}},s.onTouchEnd=function(){this.isDragging=!1,this.selectedRowTiles=[]},s.getRowTiles=function(e){for(var t,n=[],o=i(this.outerRing.children);!(t=o()).done;){var r=t.value;r.children[e]&&n.push(r.children[e])}return n},t}(T)).prototype,"outerRing",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(R.prototype,"spinSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),E=t(R.prototype,"camera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/RingLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,r,e,n,o,a,c,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.v3,s=t.Component}],execute:function(){var u,l,p,h,d;o._RF.push({},"d534d6ZHQBKKLc1MAMMQmoV","RingLayout",void 0);var f=a.ccclass,y=a.property;t("RingLayout",(u=f("RingLayout"),l=y({tooltip:"Radius from center"}),u((d=i((h=function(t){function i(){for(var i,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,e(i,"radius",d,n(i)),i}return r(i,t),i.prototype.start=function(){var t=this,i=this.node.children.length;this.node.children.forEach((function(r,e){var n=2*Math.PI/i*e-Math.PI/2;r.setPosition(c(t.radius*Math.cos(n),0,t.radius*Math.sin(n)))}))},i}(s)).prototype,"radius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),p=h))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/RotateRingController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,o,r,s,a,c,u,l,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.input,c=t.Input,u=t.Vec2,l=t.tween,p=t.Component}],execute:function(){var h,_,y,f,d;r._RF.push({},"93a74zMaDpAkp64D4ZIZTdf","RotateRingController",void 0);var g=s.ccclass,b=s.property;t("RotateRingController",(h=g("RotateRingController"),_=b({tooltip:"Seconds per 60Â° step"}),h((d=n((f=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,i(n,"spinDuration",d,o(n)),n._start=new u,n._busy=!1,n}e(n,t);var r=n.prototype;return r.start=function(){a.on(c.EventType.TOUCH_START,this._onStart,this),a.on(c.EventType.TOUCH_END,this._onEnd,this)},r._onStart=function(t){t.getLocation(this._start)},r._onEnd=function(t){if(!this._busy){var n=t.getLocation(new u),e=n.x-this._start.x,i=n.y-this._start.y;Math.abs(e)>50&&Math.abs(e)>Math.abs(i)&&(this._busy=!0,this._spin(e>0?1:-1))}},r._spin=function(t){var n=this,e=360/this.node.children.length*t;l(this.node).by(this.spinDuration,{eulerAngles:{y:e}}).call((function(){return n.node.emit("rotated")})).start()},r.unlock=function(){this._busy=!1},n}(p)).prototype,"spinDuration",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),y=f))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/RowGroupSpinner.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i,r,s,a,c,l,u,h,p,d,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.createForOfIteratorHelperLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.Node,l=e.Camera,u=e.input,h=e.Input,p=e.PhysicsSystem,d=e.Vec3,T=e.Component}],execute:function(){var f,g,v,y,R,w,S,E;s._RF.push({},"57d7bVA1cZDRrUvdJ7UaNxv","RowGroupSpinner",void 0);var b=a.ccclass,D=a.property;e("RowGroupSpinner",(f=b("RowGroupSpinner"),g=D(c),v=D(l),f((w=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"outerRing",w,r(t)),i(t,"camera",S,r(t)),i(t,"spinSpeed",E,r(t)),t.selectedRowY=-1,t.selectedTiles=[],t.isDragging=!1,t.lastX=0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){u.on(h.EventType.TOUCH_START,this.onTouchStart,this),u.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(h.EventType.TOUCH_END,this.onTouchEnd,this)},s.onDestroy=function(){u.off(h.EventType.TOUCH_START,this.onTouchStart,this),u.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(h.EventType.TOUCH_END,this.onTouchEnd,this)},s.onTouchStart=function(e){this.lastX=e.getLocationX();var t=this.camera.screenPointToRay(e.getLocationX(),e.getLocationY()),n=[];if(p.instance.raycastClosest(t,1e3,n)){var i=n[0].collider.node.worldPosition.y;this.selectedRowY=i,this.selectedTiles=[];for(var r,s=o(this.outerRing.children);!(r=s()).done;)for(var a,c=r.value,l=o(c.children);!(a=l()).done;){var u=a.value;Math.abs(u.worldPosition.y-i)<.1&&this.selectedTiles.push(u)}console.log("ðŸŽ¯ Selected row at Y:",i,"Tiles:",this.selectedTiles.length),this.isDragging=!0}},s.onTouchMove=function(e){if(this.isDragging){for(var t,n=e.getLocationX()-this.lastX,i=o(this.selectedTiles);!(t=i()).done;){var r=t.value;r.parent.eulerAngles=r.parent.eulerAngles.add(new d(0,.2*n,0))}this.lastX=e.getLocationX()}},s.onTouchEnd=function(){this.isDragging=!1,this.selectedTiles=[]},t}(T)).prototype,"outerRing",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(R.prototype,"camera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(R.prototype,"spinSpeed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),y=R))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAudioController.ts.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,o,i,n,l,a,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,a=t.Node,u=t.AudioSource,s=t.Component}],execute:function(){var c,p,h,y,d,f,g;n._RF.push({},"52507J4JENCoo4qfXmsftiV","TowerAudioController.ts",void 0);var _=l.ccclass,w=l.property;t("TowerAudioController",(c=_("TowerAudioController"),p=w(a),h=w(u),c((f=e((d=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,o(e,"tower",f,i(e)),o(e,"audioSource",g,i(e)),e._lastY=0,e._playing=!1,e}r(e,t);var n=e.prototype;return n.start=function(){this._lastY=this.tower.eulerAngles.y},n.update=function(){var t=this.tower.eulerAngles.y;Math.abs(t-this._lastY)>.001?this._playing||(this.audioSource.play(),this._playing=!0):this._playing&&(this.audioSource.stop(),this._playing=!1),this._lastY=t},e}(s)).prototype,"tower",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(d.prototype,"audioSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,n,o,a,l,u,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,u=e.Material,c=e.Component}],execute:function(){var p,s,f,b,g,h,w,d,y,m;o._RF.push({},"6a4c87btdRMco91e4bn7/f0","TowerGenerator",void 0);var v=a.ccclass,z=a.property;e("TowerGenerator",(p=v("TowerGenerator"),s=z(l),f=z([u]),p((h=r((g=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,i(r,"tilePrefab",h,n(r)),i(r,"tileMaterials",w,n(r)),i(r,"baseRadius",d,n(r)),i(r,"ringSpacing",y,n(r)),i(r,"tileHeight",m,n(r)),r.outerColumns=[],r}t(r,e);var o=r.prototype;return o.start=function(){0===this.node.children.length&&this.generateTower()},o.generateTower=function(){throw new Error("Method not implemented.")},r}(c)).prototype,"tilePrefab",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(g.prototype,"tileMaterials",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=r(g.prototype,"baseRadius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5.8}}),y=r(g.prototype,"ringSpacing",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),m=r(g.prototype,"tileHeight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.63}}),b=g))||b));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});